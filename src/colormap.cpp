//
// Copyright (C) Wojciech Jarosz. All rights reserved.
// Use of this source code is governed by a BSD-style license that can
// be found in the LICENSE.txt file.
//

#include "colormap.h"
#include "common.h"
#include "texture.h"

using std::unique_ptr;
using std::vector;

static vector<vector<ImU32>> s_values{Colormap_COUNT};
static unique_ptr<Texture>   s_textures[Colormap_COUNT];

void Colormap::initialize()
{
    Colormap_ cmap;
    // populate the values from the pre-defined ImPlot colormaps
    for (cmap = 0; cmap <= Colormap_Greys; ++cmap)
    {
        s_values[cmap].resize(ImPlot::GetColormapSize(cmap));
        for (size_t i = 0; i < s_values[cmap].size(); ++i)
            s_values[cmap][i] = ImGui::ColorConvertFloat4ToU32(ImPlot::GetColormapColor(i, cmap));
    }

    cmap           = Colormap_Inferno;
    s_values[cmap] = {
        IM_COL32(0, 0, 3, 255),       IM_COL32(0, 0, 4, 255),       IM_COL32(0, 0, 6, 255),
        IM_COL32(1, 0, 7, 255),       IM_COL32(1, 1, 9, 255),       IM_COL32(1, 1, 11, 255),
        IM_COL32(2, 1, 14, 255),      IM_COL32(2, 2, 16, 255),      IM_COL32(3, 2, 18, 255),
        IM_COL32(4, 3, 20, 255),      IM_COL32(4, 3, 22, 255),      IM_COL32(5, 4, 24, 255),
        IM_COL32(6, 4, 27, 255),      IM_COL32(7, 5, 29, 255),      IM_COL32(8, 6, 31, 255),
        IM_COL32(9, 6, 33, 255),      IM_COL32(10, 7, 35, 255),     IM_COL32(11, 7, 38, 255),
        IM_COL32(13, 8, 40, 255),     IM_COL32(14, 8, 42, 255),     IM_COL32(15, 9, 45, 255),
        IM_COL32(16, 9, 47, 255),     IM_COL32(18, 10, 50, 255),    IM_COL32(19, 10, 52, 255),
        IM_COL32(20, 11, 54, 255),    IM_COL32(22, 11, 57, 255),    IM_COL32(23, 11, 59, 255),
        IM_COL32(25, 11, 62, 255),    IM_COL32(26, 11, 64, 255),    IM_COL32(28, 12, 67, 255),
        IM_COL32(29, 12, 69, 255),    IM_COL32(31, 12, 71, 255),    IM_COL32(32, 12, 74, 255),
        IM_COL32(34, 11, 76, 255),    IM_COL32(36, 11, 78, 255),    IM_COL32(38, 11, 80, 255),
        IM_COL32(39, 11, 82, 255),    IM_COL32(41, 11, 84, 255),    IM_COL32(43, 10, 86, 255),
        IM_COL32(45, 10, 88, 255),    IM_COL32(46, 10, 90, 255),    IM_COL32(48, 10, 92, 255),
        IM_COL32(50, 9, 93, 255),     IM_COL32(52, 9, 95, 255),     IM_COL32(53, 9, 96, 255),
        IM_COL32(55, 9, 97, 255),     IM_COL32(57, 9, 98, 255),     IM_COL32(59, 9, 100, 255),
        IM_COL32(60, 9, 101, 255),    IM_COL32(62, 9, 102, 255),    IM_COL32(64, 9, 102, 255),
        IM_COL32(65, 9, 103, 255),    IM_COL32(67, 10, 104, 255),   IM_COL32(69, 10, 105, 255),
        IM_COL32(70, 10, 105, 255),   IM_COL32(72, 11, 106, 255),   IM_COL32(74, 11, 106, 255),
        IM_COL32(75, 12, 107, 255),   IM_COL32(77, 12, 107, 255),   IM_COL32(79, 13, 108, 255),
        IM_COL32(80, 13, 108, 255),   IM_COL32(82, 14, 108, 255),   IM_COL32(83, 14, 109, 255),
        IM_COL32(85, 15, 109, 255),   IM_COL32(87, 15, 109, 255),   IM_COL32(88, 16, 109, 255),
        IM_COL32(90, 17, 109, 255),   IM_COL32(91, 17, 110, 255),   IM_COL32(93, 18, 110, 255),
        IM_COL32(95, 18, 110, 255),   IM_COL32(96, 19, 110, 255),   IM_COL32(98, 20, 110, 255),
        IM_COL32(99, 20, 110, 255),   IM_COL32(101, 21, 110, 255),  IM_COL32(102, 21, 110, 255),
        IM_COL32(104, 22, 110, 255),  IM_COL32(106, 23, 110, 255),  IM_COL32(107, 23, 110, 255),
        IM_COL32(109, 24, 110, 255),  IM_COL32(110, 24, 110, 255),  IM_COL32(112, 25, 110, 255),
        IM_COL32(114, 25, 109, 255),  IM_COL32(115, 26, 109, 255),  IM_COL32(117, 27, 109, 255),
        IM_COL32(118, 27, 109, 255),  IM_COL32(120, 28, 109, 255),  IM_COL32(122, 28, 109, 255),
        IM_COL32(123, 29, 108, 255),  IM_COL32(125, 29, 108, 255),  IM_COL32(126, 30, 108, 255),
        IM_COL32(128, 31, 107, 255),  IM_COL32(129, 31, 107, 255),  IM_COL32(131, 32, 107, 255),
        IM_COL32(133, 32, 106, 255),  IM_COL32(134, 33, 106, 255),  IM_COL32(136, 33, 106, 255),
        IM_COL32(137, 34, 105, 255),  IM_COL32(139, 34, 105, 255),  IM_COL32(141, 35, 105, 255),
        IM_COL32(142, 36, 104, 255),  IM_COL32(144, 36, 104, 255),  IM_COL32(145, 37, 103, 255),
        IM_COL32(147, 37, 103, 255),  IM_COL32(149, 38, 102, 255),  IM_COL32(150, 38, 102, 255),
        IM_COL32(152, 39, 101, 255),  IM_COL32(153, 40, 100, 255),  IM_COL32(155, 40, 100, 255),
        IM_COL32(156, 41, 99, 255),   IM_COL32(158, 41, 99, 255),   IM_COL32(160, 42, 98, 255),
        IM_COL32(161, 43, 97, 255),   IM_COL32(163, 43, 97, 255),   IM_COL32(164, 44, 96, 255),
        IM_COL32(166, 44, 95, 255),   IM_COL32(167, 45, 95, 255),   IM_COL32(169, 46, 94, 255),
        IM_COL32(171, 46, 93, 255),   IM_COL32(172, 47, 92, 255),   IM_COL32(174, 48, 91, 255),
        IM_COL32(175, 49, 91, 255),   IM_COL32(177, 49, 90, 255),   IM_COL32(178, 50, 89, 255),
        IM_COL32(180, 51, 88, 255),   IM_COL32(181, 51, 87, 255),   IM_COL32(183, 52, 86, 255),
        IM_COL32(184, 53, 86, 255),   IM_COL32(187, 55, 84, 255),   IM_COL32(189, 55, 83, 255),
        IM_COL32(190, 56, 82, 255),   IM_COL32(191, 57, 81, 255),   IM_COL32(193, 58, 80, 255),
        IM_COL32(194, 59, 79, 255),   IM_COL32(196, 60, 78, 255),   IM_COL32(197, 61, 77, 255),
        IM_COL32(199, 62, 76, 255),   IM_COL32(200, 62, 75, 255),   IM_COL32(201, 63, 74, 255),
        IM_COL32(203, 64, 73, 255),   IM_COL32(204, 65, 72, 255),   IM_COL32(205, 66, 71, 255),
        IM_COL32(207, 68, 70, 255),   IM_COL32(208, 69, 68, 255),   IM_COL32(209, 70, 67, 255),
        IM_COL32(210, 71, 66, 255),   IM_COL32(212, 72, 65, 255),   IM_COL32(213, 73, 64, 255),
        IM_COL32(214, 74, 63, 255),   IM_COL32(215, 75, 62, 255),   IM_COL32(217, 77, 61, 255),
        IM_COL32(218, 78, 59, 255),   IM_COL32(219, 79, 58, 255),   IM_COL32(220, 80, 57, 255),
        IM_COL32(221, 82, 56, 255),   IM_COL32(222, 83, 55, 255),   IM_COL32(223, 84, 54, 255),
        IM_COL32(224, 86, 52, 255),   IM_COL32(226, 87, 51, 255),   IM_COL32(227, 88, 50, 255),
        IM_COL32(228, 90, 49, 255),   IM_COL32(229, 91, 48, 255),   IM_COL32(230, 92, 46, 255),
        IM_COL32(230, 94, 45, 255),   IM_COL32(231, 95, 44, 255),   IM_COL32(232, 97, 43, 255),
        IM_COL32(233, 98, 42, 255),   IM_COL32(234, 100, 40, 255),  IM_COL32(235, 101, 39, 255),
        IM_COL32(236, 103, 38, 255),  IM_COL32(237, 104, 37, 255),  IM_COL32(237, 106, 35, 255),
        IM_COL32(238, 108, 34, 255),  IM_COL32(239, 109, 33, 255),  IM_COL32(240, 111, 31, 255),
        IM_COL32(240, 112, 30, 255),  IM_COL32(241, 114, 29, 255),  IM_COL32(242, 116, 28, 255),
        IM_COL32(242, 117, 26, 255),  IM_COL32(243, 119, 25, 255),  IM_COL32(243, 121, 24, 255),
        IM_COL32(244, 122, 22, 255),  IM_COL32(245, 124, 21, 255),  IM_COL32(245, 126, 20, 255),
        IM_COL32(246, 128, 18, 255),  IM_COL32(246, 129, 17, 255),  IM_COL32(247, 131, 16, 255),
        IM_COL32(247, 133, 14, 255),  IM_COL32(248, 135, 13, 255),  IM_COL32(248, 136, 12, 255),
        IM_COL32(248, 138, 11, 255),  IM_COL32(249, 140, 9, 255),   IM_COL32(249, 142, 8, 255),
        IM_COL32(249, 144, 8, 255),   IM_COL32(250, 145, 7, 255),   IM_COL32(250, 147, 6, 255),
        IM_COL32(250, 149, 6, 255),   IM_COL32(250, 151, 6, 255),   IM_COL32(251, 153, 6, 255),
        IM_COL32(251, 155, 6, 255),   IM_COL32(251, 157, 6, 255),   IM_COL32(251, 158, 7, 255),
        IM_COL32(251, 160, 7, 255),   IM_COL32(251, 162, 8, 255),   IM_COL32(251, 164, 10, 255),
        IM_COL32(251, 166, 11, 255),  IM_COL32(251, 168, 13, 255),  IM_COL32(251, 170, 14, 255),
        IM_COL32(251, 172, 16, 255),  IM_COL32(251, 174, 18, 255),  IM_COL32(251, 176, 20, 255),
        IM_COL32(251, 177, 22, 255),  IM_COL32(251, 179, 24, 255),  IM_COL32(251, 181, 26, 255),
        IM_COL32(251, 183, 28, 255),  IM_COL32(251, 185, 30, 255),  IM_COL32(250, 187, 33, 255),
        IM_COL32(250, 189, 35, 255),  IM_COL32(250, 191, 37, 255),  IM_COL32(250, 193, 40, 255),
        IM_COL32(249, 195, 42, 255),  IM_COL32(249, 197, 44, 255),  IM_COL32(249, 199, 47, 255),
        IM_COL32(248, 201, 49, 255),  IM_COL32(248, 203, 52, 255),  IM_COL32(248, 205, 55, 255),
        IM_COL32(247, 207, 58, 255),  IM_COL32(247, 209, 60, 255),  IM_COL32(246, 211, 63, 255),
        IM_COL32(246, 213, 66, 255),  IM_COL32(245, 215, 69, 255),  IM_COL32(245, 217, 72, 255),
        IM_COL32(244, 219, 75, 255),  IM_COL32(244, 220, 79, 255),  IM_COL32(243, 222, 82, 255),
        IM_COL32(243, 224, 86, 255),  IM_COL32(243, 226, 89, 255),  IM_COL32(242, 228, 93, 255),
        IM_COL32(242, 230, 96, 255),  IM_COL32(241, 232, 100, 255), IM_COL32(241, 233, 104, 255),
        IM_COL32(241, 235, 108, 255), IM_COL32(241, 237, 112, 255), IM_COL32(241, 238, 116, 255),
        IM_COL32(241, 240, 121, 255), IM_COL32(241, 242, 125, 255), IM_COL32(242, 243, 129, 255),
        IM_COL32(242, 244, 133, 255), IM_COL32(243, 246, 137, 255), IM_COL32(244, 247, 141, 255),
        IM_COL32(245, 248, 145, 255), IM_COL32(246, 250, 149, 255), IM_COL32(247, 251, 153, 255),
        IM_COL32(249, 252, 157, 255), IM_COL32(250, 253, 160, 255), IM_COL32(252, 254, 164, 255),
    };
    ImPlot::AddColormap("Inferno", (const ImU32 *)s_values[cmap].data(), s_values[cmap].size(), false);

    cmap           = Colormap_Turbo;
    s_values[cmap] = vector<ImU32>{
        IM_COL32(48, 18, 59, 255),    IM_COL32(49, 21, 66, 255),   IM_COL32(50, 24, 74, 255),
        IM_COL32(52, 27, 81, 255),    IM_COL32(53, 30, 88, 255),   IM_COL32(54, 33, 95, 255),
        IM_COL32(55, 35, 101, 255),   IM_COL32(56, 38, 108, 255),  IM_COL32(57, 41, 114, 255),
        IM_COL32(58, 44, 121, 255),   IM_COL32(59, 47, 127, 255),  IM_COL32(60, 50, 133, 255),
        IM_COL32(60, 53, 139, 255),   IM_COL32(61, 55, 145, 255),  IM_COL32(62, 58, 150, 255),
        IM_COL32(63, 61, 156, 255),   IM_COL32(64, 64, 161, 255),  IM_COL32(64, 67, 166, 255),
        IM_COL32(65, 69, 171, 255),   IM_COL32(65, 72, 176, 255),  IM_COL32(66, 75, 181, 255),
        IM_COL32(67, 78, 186, 255),   IM_COL32(67, 80, 190, 255),  IM_COL32(67, 83, 194, 255),
        IM_COL32(68, 86, 199, 255),   IM_COL32(68, 88, 203, 255),  IM_COL32(69, 91, 206, 255),
        IM_COL32(69, 94, 210, 255),   IM_COL32(69, 96, 214, 255),  IM_COL32(69, 99, 217, 255),
        IM_COL32(70, 102, 221, 255),  IM_COL32(70, 104, 224, 255), IM_COL32(70, 107, 227, 255),
        IM_COL32(70, 109, 230, 255),  IM_COL32(70, 112, 232, 255), IM_COL32(70, 115, 235, 255),
        IM_COL32(70, 117, 237, 255),  IM_COL32(70, 120, 240, 255), IM_COL32(70, 122, 242, 255),
        IM_COL32(70, 125, 244, 255),  IM_COL32(70, 127, 246, 255), IM_COL32(70, 130, 248, 255),
        IM_COL32(69, 132, 249, 255),  IM_COL32(69, 135, 251, 255), IM_COL32(69, 137, 252, 255),
        IM_COL32(68, 140, 253, 255),  IM_COL32(67, 142, 253, 255), IM_COL32(66, 145, 254, 255),
        IM_COL32(65, 147, 254, 255),  IM_COL32(64, 150, 254, 255), IM_COL32(63, 152, 254, 255),
        IM_COL32(62, 155, 254, 255),  IM_COL32(60, 157, 253, 255), IM_COL32(59, 160, 252, 255),
        IM_COL32(57, 162, 252, 255),  IM_COL32(56, 165, 251, 255), IM_COL32(54, 168, 249, 255),
        IM_COL32(52, 170, 248, 255),  IM_COL32(51, 172, 246, 255), IM_COL32(49, 175, 245, 255),
        IM_COL32(47, 177, 243, 255),  IM_COL32(45, 180, 241, 255), IM_COL32(43, 182, 239, 255),
        IM_COL32(42, 185, 237, 255),  IM_COL32(40, 187, 235, 255), IM_COL32(38, 189, 233, 255),
        IM_COL32(37, 192, 230, 255),  IM_COL32(35, 194, 228, 255), IM_COL32(33, 196, 225, 255),
        IM_COL32(32, 198, 223, 255),  IM_COL32(30, 201, 220, 255), IM_COL32(29, 203, 218, 255),
        IM_COL32(28, 205, 215, 255),  IM_COL32(27, 207, 212, 255), IM_COL32(26, 209, 210, 255),
        IM_COL32(25, 211, 207, 255),  IM_COL32(24, 213, 204, 255), IM_COL32(24, 215, 202, 255),
        IM_COL32(23, 217, 199, 255),  IM_COL32(23, 218, 196, 255), IM_COL32(23, 220, 194, 255),
        IM_COL32(23, 222, 191, 255),  IM_COL32(24, 224, 189, 255), IM_COL32(24, 225, 186, 255),
        IM_COL32(25, 227, 184, 255),  IM_COL32(26, 228, 182, 255), IM_COL32(27, 229, 180, 255),
        IM_COL32(29, 231, 177, 255),  IM_COL32(30, 232, 175, 255), IM_COL32(32, 233, 172, 255),
        IM_COL32(34, 235, 169, 255),  IM_COL32(36, 236, 166, 255), IM_COL32(39, 237, 163, 255),
        IM_COL32(41, 238, 160, 255),  IM_COL32(44, 239, 157, 255), IM_COL32(47, 240, 154, 255),
        IM_COL32(50, 241, 151, 255),  IM_COL32(53, 243, 148, 255), IM_COL32(56, 244, 145, 255),
        IM_COL32(59, 244, 141, 255),  IM_COL32(63, 245, 138, 255), IM_COL32(66, 246, 135, 255),
        IM_COL32(70, 247, 131, 255),  IM_COL32(74, 248, 128, 255), IM_COL32(77, 249, 124, 255),
        IM_COL32(81, 249, 121, 255),  IM_COL32(85, 250, 118, 255), IM_COL32(89, 251, 114, 255),
        IM_COL32(93, 251, 111, 255),  IM_COL32(97, 252, 108, 255), IM_COL32(101, 252, 104, 255),
        IM_COL32(105, 253, 101, 255), IM_COL32(109, 253, 98, 255), IM_COL32(113, 253, 95, 255),
        IM_COL32(116, 254, 92, 255),  IM_COL32(120, 254, 89, 255), IM_COL32(124, 254, 86, 255),
        IM_COL32(128, 254, 83, 255),  IM_COL32(132, 254, 80, 255), IM_COL32(135, 254, 77, 255),
        IM_COL32(139, 254, 75, 255),  IM_COL32(142, 254, 72, 255), IM_COL32(146, 254, 70, 255),
        IM_COL32(149, 254, 68, 255),  IM_COL32(152, 254, 66, 255), IM_COL32(155, 253, 64, 255),
        IM_COL32(158, 253, 62, 255),  IM_COL32(164, 252, 59, 255), IM_COL32(166, 251, 58, 255),
        IM_COL32(169, 251, 57, 255),  IM_COL32(172, 250, 55, 255), IM_COL32(174, 249, 55, 255),
        IM_COL32(177, 248, 54, 255),  IM_COL32(179, 248, 53, 255), IM_COL32(182, 247, 53, 255),
        IM_COL32(185, 245, 52, 255),  IM_COL32(187, 244, 52, 255), IM_COL32(190, 243, 52, 255),
        IM_COL32(192, 242, 51, 255),  IM_COL32(195, 241, 51, 255), IM_COL32(197, 239, 51, 255),
        IM_COL32(200, 238, 51, 255),  IM_COL32(202, 237, 51, 255), IM_COL32(205, 235, 52, 255),
        IM_COL32(207, 234, 52, 255),  IM_COL32(209, 232, 52, 255), IM_COL32(212, 231, 53, 255),
        IM_COL32(214, 229, 53, 255),  IM_COL32(216, 227, 53, 255), IM_COL32(218, 226, 54, 255),
        IM_COL32(221, 224, 54, 255),  IM_COL32(223, 222, 54, 255), IM_COL32(225, 220, 55, 255),
        IM_COL32(227, 218, 55, 255),  IM_COL32(229, 216, 56, 255), IM_COL32(231, 215, 56, 255),
        IM_COL32(232, 213, 56, 255),  IM_COL32(234, 211, 57, 255), IM_COL32(236, 209, 57, 255),
        IM_COL32(237, 207, 57, 255),  IM_COL32(239, 205, 57, 255), IM_COL32(240, 203, 58, 255),
        IM_COL32(242, 200, 58, 255),  IM_COL32(243, 198, 58, 255), IM_COL32(244, 196, 58, 255),
        IM_COL32(246, 194, 58, 255),  IM_COL32(247, 192, 57, 255), IM_COL32(248, 190, 57, 255),
        IM_COL32(249, 188, 57, 255),  IM_COL32(249, 186, 56, 255), IM_COL32(250, 183, 55, 255),
        IM_COL32(251, 181, 55, 255),  IM_COL32(251, 179, 54, 255), IM_COL32(252, 176, 53, 255),
        IM_COL32(252, 174, 52, 255),  IM_COL32(253, 171, 51, 255), IM_COL32(253, 169, 50, 255),
        IM_COL32(253, 166, 49, 255),  IM_COL32(253, 163, 48, 255), IM_COL32(254, 161, 47, 255),
        IM_COL32(254, 158, 46, 255),  IM_COL32(254, 155, 45, 255), IM_COL32(254, 152, 44, 255),
        IM_COL32(253, 149, 43, 255),  IM_COL32(253, 146, 41, 255), IM_COL32(253, 143, 40, 255),
        IM_COL32(253, 140, 39, 255),  IM_COL32(252, 137, 38, 255), IM_COL32(252, 134, 36, 255),
        IM_COL32(251, 131, 35, 255),  IM_COL32(251, 128, 34, 255), IM_COL32(250, 125, 32, 255),
        IM_COL32(250, 122, 31, 255),  IM_COL32(249, 119, 30, 255), IM_COL32(248, 116, 28, 255),
        IM_COL32(247, 113, 27, 255),  IM_COL32(247, 110, 26, 255), IM_COL32(246, 107, 24, 255),
        IM_COL32(245, 104, 23, 255),  IM_COL32(244, 101, 22, 255), IM_COL32(243, 99, 21, 255),
        IM_COL32(242, 96, 20, 255),   IM_COL32(241, 93, 19, 255),  IM_COL32(239, 90, 17, 255),
        IM_COL32(238, 88, 16, 255),   IM_COL32(237, 85, 15, 255),  IM_COL32(236, 82, 14, 255),
        IM_COL32(234, 80, 13, 255),   IM_COL32(233, 77, 13, 255),  IM_COL32(232, 75, 12, 255),
        IM_COL32(230, 73, 11, 255),   IM_COL32(229, 70, 10, 255),  IM_COL32(227, 68, 10, 255),
        IM_COL32(226, 66, 9, 255),    IM_COL32(224, 64, 8, 255),   IM_COL32(222, 62, 8, 255),
        IM_COL32(221, 60, 7, 255),    IM_COL32(219, 58, 7, 255),   IM_COL32(217, 56, 6, 255),
        IM_COL32(215, 54, 6, 255),    IM_COL32(214, 52, 5, 255),   IM_COL32(212, 50, 5, 255),
        IM_COL32(210, 48, 5, 255),    IM_COL32(208, 47, 4, 255),   IM_COL32(206, 45, 4, 255),
        IM_COL32(203, 43, 3, 255),    IM_COL32(201, 41, 3, 255),   IM_COL32(199, 40, 3, 255),
        IM_COL32(197, 38, 2, 255),    IM_COL32(195, 36, 2, 255),   IM_COL32(192, 35, 2, 255),
        IM_COL32(190, 33, 2, 255),    IM_COL32(187, 31, 1, 255),   IM_COL32(185, 30, 1, 255),
        IM_COL32(182, 28, 1, 255),    IM_COL32(180, 27, 1, 255),   IM_COL32(177, 25, 1, 255),
        IM_COL32(174, 24, 1, 255),    IM_COL32(172, 22, 1, 255),   IM_COL32(169, 21, 1, 255),
        IM_COL32(166, 20, 1, 255),    IM_COL32(163, 18, 1, 255),   IM_COL32(160, 17, 1, 255),
        IM_COL32(157, 16, 1, 255),    IM_COL32(154, 14, 1, 255),   IM_COL32(151, 13, 1, 255),
        IM_COL32(148, 12, 1, 255),    IM_COL32(145, 11, 1, 255),   IM_COL32(142, 10, 1, 255),
        IM_COL32(139, 9, 1, 255),     IM_COL32(135, 8, 1, 255),    IM_COL32(132, 7, 1, 255),
        IM_COL32(129, 6, 2, 255),     IM_COL32(125, 5, 2, 255),    IM_COL32(122, 4, 2, 255),
    };
    ImPlot::AddColormap("Turbo", (const ImU32 *)s_values[cmap].data(), s_values[cmap].size(), false);

    cmap           = Colormap_IceFire;
    s_values[cmap] = vector<ImU32>{
        IM_COL32(188, 230, 218, 255), IM_COL32(185, 228, 217, 255), IM_COL32(183, 226, 217, 255),
        IM_COL32(180, 224, 216, 255), IM_COL32(177, 222, 215, 255), IM_COL32(175, 220, 215, 255),
        IM_COL32(172, 218, 214, 255), IM_COL32(169, 216, 213, 255), IM_COL32(166, 214, 213, 255),
        IM_COL32(163, 212, 212, 255), IM_COL32(160, 210, 211, 255), IM_COL32(158, 209, 211, 255),
        IM_COL32(155, 207, 210, 255), IM_COL32(152, 205, 210, 255), IM_COL32(149, 203, 209, 255),
        IM_COL32(146, 201, 209, 255), IM_COL32(143, 199, 208, 255), IM_COL32(140, 197, 208, 255),
        IM_COL32(137, 196, 207, 255), IM_COL32(134, 194, 207, 255), IM_COL32(131, 192, 207, 255),
        IM_COL32(128, 190, 206, 255), IM_COL32(125, 188, 206, 255), IM_COL32(122, 187, 206, 255),
        IM_COL32(119, 185, 205, 255), IM_COL32(116, 183, 205, 255), IM_COL32(113, 181, 205, 255),
        IM_COL32(110, 180, 205, 255), IM_COL32(107, 178, 205, 255), IM_COL32(104, 176, 205, 255),
        IM_COL32(101, 174, 205, 255), IM_COL32(98, 172, 205, 255),  IM_COL32(95, 170, 205, 255),
        IM_COL32(92, 169, 205, 255),  IM_COL32(90, 167, 205, 255),  IM_COL32(87, 165, 205, 255),
        IM_COL32(85, 163, 205, 255),  IM_COL32(82, 161, 205, 255),  IM_COL32(80, 159, 205, 255),
        IM_COL32(77, 157, 205, 255),  IM_COL32(75, 155, 205, 255),  IM_COL32(73, 153, 205, 255),
        IM_COL32(71, 151, 205, 255),  IM_COL32(69, 149, 205, 255),  IM_COL32(67, 147, 206, 255),
        IM_COL32(65, 145, 206, 255),  IM_COL32(63, 143, 206, 255),  IM_COL32(61, 141, 206, 255),
        IM_COL32(59, 139, 206, 255),  IM_COL32(58, 137, 207, 255),  IM_COL32(57, 135, 207, 255),
        IM_COL32(56, 133, 207, 255),  IM_COL32(55, 131, 207, 255),  IM_COL32(54, 128, 208, 255),
        IM_COL32(54, 126, 208, 255),  IM_COL32(54, 124, 207, 255),  IM_COL32(55, 121, 207, 255),
        IM_COL32(55, 119, 207, 255),  IM_COL32(56, 117, 206, 255),  IM_COL32(57, 114, 206, 255),
        IM_COL32(59, 112, 205, 255),  IM_COL32(60, 110, 204, 255),  IM_COL32(61, 107, 202, 255),
        IM_COL32(63, 105, 201, 255),  IM_COL32(64, 103, 199, 255),  IM_COL32(66, 100, 197, 255),
        IM_COL32(67, 98, 195, 255),   IM_COL32(68, 96, 192, 255),   IM_COL32(69, 94, 190, 255),
        IM_COL32(70, 91, 187, 255),   IM_COL32(71, 89, 185, 255),   IM_COL32(72, 87, 182, 255),
        IM_COL32(72, 85, 179, 255),   IM_COL32(73, 83, 176, 255),   IM_COL32(73, 82, 172, 255),
        IM_COL32(73, 80, 169, 255),   IM_COL32(73, 78, 165, 255),   IM_COL32(73, 77, 161, 255),
        IM_COL32(73, 75, 157, 255),   IM_COL32(72, 74, 153, 255),   IM_COL32(71, 72, 149, 255),
        IM_COL32(71, 71, 145, 255),   IM_COL32(70, 70, 141, 255),   IM_COL32(69, 68, 138, 255),
        IM_COL32(68, 67, 134, 255),   IM_COL32(67, 66, 130, 255),   IM_COL32(66, 64, 126, 255),
        IM_COL32(65, 63, 122, 255),   IM_COL32(64, 62, 119, 255),   IM_COL32(63, 61, 115, 255),
        IM_COL32(62, 60, 112, 255),   IM_COL32(61, 58, 108, 255),   IM_COL32(59, 57, 105, 255),
        IM_COL32(58, 56, 101, 255),   IM_COL32(57, 55, 98, 255),    IM_COL32(56, 54, 95, 255),
        IM_COL32(54, 52, 92, 255),    IM_COL32(53, 51, 89, 255),    IM_COL32(52, 50, 85, 255),
        IM_COL32(51, 49, 82, 255),    IM_COL32(50, 48, 80, 255),    IM_COL32(48, 47, 77, 255),
        IM_COL32(47, 46, 74, 255),    IM_COL32(46, 45, 71, 255),    IM_COL32(45, 44, 68, 255),
        IM_COL32(44, 43, 66, 255),    IM_COL32(43, 42, 63, 255),    IM_COL32(41, 41, 61, 255),
        IM_COL32(40, 40, 59, 255),    IM_COL32(39, 39, 56, 255),    IM_COL32(38, 38, 54, 255),
        IM_COL32(38, 37, 52, 255),    IM_COL32(37, 36, 50, 255),    IM_COL32(36, 35, 48, 255),
        IM_COL32(35, 34, 46, 255),    IM_COL32(34, 34, 44, 255),    IM_COL32(34, 33, 42, 255),
        IM_COL32(33, 33, 41, 255),    IM_COL32(33, 32, 39, 255),    IM_COL32(32, 31, 38, 255),
        IM_COL32(32, 31, 36, 255),    IM_COL32(31, 31, 35, 255),    IM_COL32(31, 30, 34, 255),
        IM_COL32(31, 30, 33, 255),    IM_COL32(31, 30, 32, 255),    IM_COL32(30, 30, 31, 255),
        IM_COL32(30, 30, 30, 255),    IM_COL32(31, 30, 30, 255),    IM_COL32(32, 29, 30, 255),
        IM_COL32(33, 29, 30, 255),    IM_COL32(34, 29, 30, 255),    IM_COL32(35, 29, 30, 255),
        IM_COL32(36, 29, 30, 255),    IM_COL32(37, 29, 30, 255),    IM_COL32(39, 29, 31, 255),
        IM_COL32(40, 29, 31, 255),    IM_COL32(42, 30, 32, 255),    IM_COL32(43, 30, 32, 255),
        IM_COL32(45, 30, 33, 255),    IM_COL32(47, 30, 33, 255),    IM_COL32(48, 31, 34, 255),
        IM_COL32(50, 31, 35, 255),    IM_COL32(52, 32, 36, 255),    IM_COL32(54, 32, 36, 255),
        IM_COL32(56, 32, 37, 255),    IM_COL32(58, 33, 38, 255),    IM_COL32(60, 33, 39, 255),
        IM_COL32(62, 34, 40, 255),    IM_COL32(65, 34, 41, 255),    IM_COL32(67, 35, 42, 255),
        IM_COL32(69, 35, 43, 255),    IM_COL32(72, 36, 44, 255),    IM_COL32(74, 36, 45, 255),
        IM_COL32(76, 37, 46, 255),    IM_COL32(79, 37, 47, 255),    IM_COL32(81, 38, 48, 255),
        IM_COL32(84, 39, 49, 255),    IM_COL32(87, 39, 50, 255),    IM_COL32(89, 40, 51, 255),
        IM_COL32(92, 40, 53, 255),    IM_COL32(94, 40, 54, 255),    IM_COL32(97, 41, 55, 255),
        IM_COL32(100, 41, 56, 255),   IM_COL32(103, 42, 57, 255),   IM_COL32(105, 42, 58, 255),
        IM_COL32(108, 43, 59, 255),   IM_COL32(111, 43, 60, 255),   IM_COL32(114, 43, 61, 255),
        IM_COL32(117, 44, 61, 255),   IM_COL32(120, 44, 62, 255),   IM_COL32(123, 44, 63, 255),
        IM_COL32(126, 44, 64, 255),   IM_COL32(129, 45, 65, 255),   IM_COL32(132, 45, 65, 255),
        IM_COL32(135, 45, 66, 255),   IM_COL32(138, 45, 66, 255),   IM_COL32(141, 45, 67, 255),
        IM_COL32(144, 45, 67, 255),   IM_COL32(147, 46, 68, 255),   IM_COL32(150, 46, 68, 255),
        IM_COL32(153, 46, 68, 255),   IM_COL32(156, 46, 68, 255),   IM_COL32(159, 46, 68, 255),
        IM_COL32(162, 46, 68, 255),   IM_COL32(165, 47, 68, 255),   IM_COL32(168, 47, 67, 255),
        IM_COL32(171, 48, 67, 255),   IM_COL32(173, 49, 66, 255),   IM_COL32(176, 49, 66, 255),
        IM_COL32(179, 50, 65, 255),   IM_COL32(182, 51, 64, 255),   IM_COL32(184, 52, 63, 255),
        IM_COL32(187, 53, 63, 255),   IM_COL32(189, 55, 62, 255),   IM_COL32(192, 56, 61, 255),
        IM_COL32(194, 57, 60, 255),   IM_COL32(196, 59, 59, 255),   IM_COL32(199, 61, 58, 255),
        IM_COL32(201, 62, 57, 255),   IM_COL32(203, 64, 56, 255),   IM_COL32(205, 66, 56, 255),
        IM_COL32(207, 68, 55, 255),   IM_COL32(209, 70, 54, 255),   IM_COL32(211, 73, 54, 255),
        IM_COL32(213, 75, 53, 255),   IM_COL32(215, 77, 52, 255),   IM_COL32(216, 80, 52, 255),
        IM_COL32(218, 82, 52, 255),   IM_COL32(220, 84, 51, 255),   IM_COL32(221, 87, 51, 255),
        IM_COL32(223, 89, 51, 255),   IM_COL32(224, 92, 50, 255),   IM_COL32(226, 94, 50, 255),
        IM_COL32(227, 97, 51, 255),   IM_COL32(228, 100, 51, 255),  IM_COL32(229, 102, 51, 255),
        IM_COL32(231, 105, 52, 255),  IM_COL32(232, 108, 53, 255),  IM_COL32(233, 111, 54, 255),
        IM_COL32(234, 114, 55, 255),  IM_COL32(235, 117, 57, 255),  IM_COL32(235, 120, 59, 255),
        IM_COL32(236, 122, 61, 255),  IM_COL32(237, 125, 63, 255),  IM_COL32(238, 128, 66, 255),
        IM_COL32(238, 131, 69, 255),  IM_COL32(239, 134, 72, 255),  IM_COL32(239, 137, 75, 255),
        IM_COL32(240, 140, 78, 255),  IM_COL32(241, 143, 81, 255),  IM_COL32(241, 145, 84, 255),
        IM_COL32(242, 148, 87, 255),  IM_COL32(242, 151, 91, 255),  IM_COL32(243, 154, 94, 255),
        IM_COL32(244, 157, 98, 255),  IM_COL32(244, 159, 102, 255), IM_COL32(245, 162, 105, 255),
        IM_COL32(245, 165, 109, 255), IM_COL32(246, 168, 113, 255), IM_COL32(246, 170, 116, 255),
        IM_COL32(247, 173, 120, 255), IM_COL32(247, 176, 124, 255), IM_COL32(248, 178, 127, 255),
        IM_COL32(249, 181, 131, 255), IM_COL32(249, 184, 135, 255), IM_COL32(250, 187, 139, 255),
        IM_COL32(250, 189, 142, 255), IM_COL32(251, 192, 146, 255), IM_COL32(251, 195, 150, 255),
        IM_COL32(252, 198, 153, 255), IM_COL32(252, 200, 157, 255), IM_COL32(253, 203, 161, 255),
        IM_COL32(253, 206, 164, 255), IM_COL32(254, 209, 168, 255), IM_COL32(254, 211, 172, 255),
    };
    ImPlot::AddColormap("IceFire", (const ImU32 *)s_values[cmap].data(), s_values[cmap].size(), false);

    cmap           = Colormap_CoolWarm;
    s_values[cmap] = {
        IM_COL32(58, 76, 192, 255),   IM_COL32(59, 77, 193, 255),   IM_COL32(60, 79, 195, 255),
        IM_COL32(62, 81, 196, 255),   IM_COL32(63, 83, 198, 255),   IM_COL32(64, 84, 199, 255),
        IM_COL32(65, 86, 201, 255),   IM_COL32(66, 88, 202, 255),   IM_COL32(67, 90, 204, 255),
        IM_COL32(69, 91, 205, 255),   IM_COL32(70, 93, 207, 255),   IM_COL32(71, 95, 208, 255),
        IM_COL32(72, 96, 209, 255),   IM_COL32(73, 98, 211, 255),   IM_COL32(75, 100, 212, 255),
        IM_COL32(76, 102, 214, 255),  IM_COL32(77, 103, 215, 255),  IM_COL32(78, 105, 216, 255),
        IM_COL32(80, 107, 218, 255),  IM_COL32(81, 108, 219, 255),  IM_COL32(82, 110, 220, 255),
        IM_COL32(83, 112, 221, 255),  IM_COL32(85, 113, 222, 255),  IM_COL32(86, 115, 224, 255),
        IM_COL32(87, 117, 225, 255),  IM_COL32(88, 118, 226, 255),  IM_COL32(90, 120, 227, 255),
        IM_COL32(91, 121, 228, 255),  IM_COL32(92, 123, 229, 255),  IM_COL32(93, 125, 230, 255),
        IM_COL32(95, 126, 231, 255),  IM_COL32(96, 128, 232, 255),  IM_COL32(97, 130, 234, 255),
        IM_COL32(99, 131, 234, 255),  IM_COL32(100, 133, 235, 255), IM_COL32(101, 134, 236, 255),
        IM_COL32(103, 136, 237, 255), IM_COL32(104, 137, 238, 255), IM_COL32(105, 139, 239, 255),
        IM_COL32(107, 141, 240, 255), IM_COL32(108, 142, 241, 255), IM_COL32(109, 144, 241, 255),
        IM_COL32(111, 145, 242, 255), IM_COL32(112, 147, 243, 255), IM_COL32(113, 148, 244, 255),
        IM_COL32(115, 149, 244, 255), IM_COL32(116, 151, 245, 255), IM_COL32(117, 152, 246, 255),
        IM_COL32(119, 154, 246, 255), IM_COL32(120, 155, 247, 255), IM_COL32(122, 157, 248, 255),
        IM_COL32(123, 158, 248, 255), IM_COL32(124, 160, 249, 255), IM_COL32(126, 161, 249, 255),
        IM_COL32(127, 162, 250, 255), IM_COL32(128, 164, 250, 255), IM_COL32(130, 165, 251, 255),
        IM_COL32(131, 166, 251, 255), IM_COL32(133, 168, 251, 255), IM_COL32(134, 169, 252, 255),
        IM_COL32(135, 170, 252, 255), IM_COL32(137, 172, 252, 255), IM_COL32(138, 173, 253, 255),
        IM_COL32(139, 174, 253, 255), IM_COL32(141, 175, 253, 255), IM_COL32(142, 177, 253, 255),
        IM_COL32(144, 178, 254, 255), IM_COL32(145, 179, 254, 255), IM_COL32(146, 180, 254, 255),
        IM_COL32(148, 181, 254, 255), IM_COL32(149, 183, 254, 255), IM_COL32(151, 184, 254, 255),
        IM_COL32(152, 185, 254, 255), IM_COL32(153, 186, 254, 255), IM_COL32(155, 187, 254, 255),
        IM_COL32(156, 188, 254, 255), IM_COL32(157, 189, 254, 255), IM_COL32(159, 190, 254, 255),
        IM_COL32(160, 191, 254, 255), IM_COL32(162, 192, 254, 255), IM_COL32(163, 193, 254, 255),
        IM_COL32(164, 194, 254, 255), IM_COL32(166, 195, 253, 255), IM_COL32(167, 196, 253, 255),
        IM_COL32(168, 197, 253, 255), IM_COL32(170, 198, 253, 255), IM_COL32(171, 199, 252, 255),
        IM_COL32(172, 200, 252, 255), IM_COL32(174, 201, 252, 255), IM_COL32(175, 202, 251, 255),
        IM_COL32(176, 203, 251, 255), IM_COL32(178, 203, 251, 255), IM_COL32(179, 204, 250, 255),
        IM_COL32(180, 205, 250, 255), IM_COL32(182, 206, 249, 255), IM_COL32(183, 207, 249, 255),
        IM_COL32(184, 207, 248, 255), IM_COL32(185, 208, 248, 255), IM_COL32(187, 209, 247, 255),
        IM_COL32(188, 209, 246, 255), IM_COL32(189, 210, 246, 255), IM_COL32(190, 211, 245, 255),
        IM_COL32(192, 211, 245, 255), IM_COL32(193, 212, 244, 255), IM_COL32(194, 212, 243, 255),
        IM_COL32(195, 213, 242, 255), IM_COL32(197, 213, 242, 255), IM_COL32(198, 214, 241, 255),
        IM_COL32(199, 214, 240, 255), IM_COL32(200, 215, 239, 255), IM_COL32(201, 215, 238, 255),
        IM_COL32(202, 216, 238, 255), IM_COL32(204, 216, 237, 255), IM_COL32(205, 217, 236, 255),
        IM_COL32(206, 217, 235, 255), IM_COL32(207, 217, 234, 255), IM_COL32(208, 218, 233, 255),
        IM_COL32(209, 218, 232, 255), IM_COL32(210, 218, 231, 255), IM_COL32(211, 219, 230, 255),
        IM_COL32(213, 219, 229, 255), IM_COL32(214, 219, 228, 255), IM_COL32(215, 219, 226, 255),
        IM_COL32(216, 219, 225, 255), IM_COL32(217, 220, 224, 255), IM_COL32(218, 220, 223, 255),
        IM_COL32(219, 220, 222, 255), IM_COL32(221, 220, 219, 255), IM_COL32(222, 219, 218, 255),
        IM_COL32(223, 219, 217, 255), IM_COL32(224, 218, 215, 255), IM_COL32(225, 218, 214, 255),
        IM_COL32(226, 217, 212, 255), IM_COL32(227, 217, 211, 255), IM_COL32(228, 216, 209, 255),
        IM_COL32(229, 216, 208, 255), IM_COL32(230, 215, 207, 255), IM_COL32(231, 214, 205, 255),
        IM_COL32(231, 214, 204, 255), IM_COL32(232, 213, 202, 255), IM_COL32(233, 212, 201, 255),
        IM_COL32(234, 211, 199, 255), IM_COL32(235, 211, 198, 255), IM_COL32(236, 210, 196, 255),
        IM_COL32(236, 209, 195, 255), IM_COL32(237, 208, 193, 255), IM_COL32(237, 207, 192, 255),
        IM_COL32(238, 207, 190, 255), IM_COL32(239, 206, 188, 255), IM_COL32(239, 205, 187, 255),
        IM_COL32(240, 204, 185, 255), IM_COL32(241, 203, 184, 255), IM_COL32(241, 202, 182, 255),
        IM_COL32(242, 201, 181, 255), IM_COL32(242, 200, 179, 255), IM_COL32(242, 199, 178, 255),
        IM_COL32(243, 198, 176, 255), IM_COL32(243, 197, 175, 255), IM_COL32(244, 196, 173, 255),
        IM_COL32(244, 195, 171, 255), IM_COL32(244, 194, 170, 255), IM_COL32(245, 193, 168, 255),
        IM_COL32(245, 192, 167, 255), IM_COL32(245, 191, 165, 255), IM_COL32(246, 189, 164, 255),
        IM_COL32(246, 188, 162, 255), IM_COL32(246, 187, 160, 255), IM_COL32(246, 186, 159, 255),
        IM_COL32(246, 185, 157, 255), IM_COL32(246, 183, 156, 255), IM_COL32(246, 182, 154, 255),
        IM_COL32(247, 181, 152, 255), IM_COL32(247, 179, 151, 255), IM_COL32(247, 178, 149, 255),
        IM_COL32(247, 177, 148, 255), IM_COL32(247, 176, 146, 255), IM_COL32(247, 174, 145, 255),
        IM_COL32(247, 173, 143, 255), IM_COL32(246, 171, 141, 255), IM_COL32(246, 170, 140, 255),
        IM_COL32(246, 169, 138, 255), IM_COL32(246, 167, 137, 255), IM_COL32(246, 166, 135, 255),
        IM_COL32(246, 164, 134, 255), IM_COL32(246, 163, 132, 255), IM_COL32(245, 161, 130, 255),
        IM_COL32(245, 160, 129, 255), IM_COL32(245, 158, 127, 255), IM_COL32(244, 157, 126, 255),
        IM_COL32(244, 155, 124, 255), IM_COL32(244, 154, 123, 255), IM_COL32(243, 152, 121, 255),
        IM_COL32(243, 150, 120, 255), IM_COL32(243, 149, 118, 255), IM_COL32(242, 147, 117, 255),
        IM_COL32(242, 145, 115, 255), IM_COL32(241, 144, 114, 255), IM_COL32(241, 142, 112, 255),
        IM_COL32(240, 141, 111, 255), IM_COL32(240, 139, 109, 255), IM_COL32(239, 137, 108, 255),
        IM_COL32(238, 135, 106, 255), IM_COL32(238, 134, 105, 255), IM_COL32(237, 132, 103, 255),
        IM_COL32(236, 130, 102, 255), IM_COL32(236, 128, 100, 255), IM_COL32(235, 127, 99, 255),
        IM_COL32(234, 125, 97, 255),  IM_COL32(234, 123, 96, 255),  IM_COL32(233, 121, 94, 255),
        IM_COL32(232, 119, 93, 255),  IM_COL32(231, 117, 92, 255),  IM_COL32(230, 116, 90, 255),
        IM_COL32(230, 114, 89, 255),  IM_COL32(229, 112, 87, 255),  IM_COL32(228, 110, 86, 255),
        IM_COL32(227, 108, 84, 255),  IM_COL32(226, 106, 83, 255),  IM_COL32(225, 104, 82, 255),
        IM_COL32(224, 102, 80, 255),  IM_COL32(223, 100, 79, 255),  IM_COL32(222, 98, 78, 255),
        IM_COL32(221, 96, 76, 255),   IM_COL32(220, 94, 75, 255),   IM_COL32(219, 92, 74, 255),
        IM_COL32(218, 90, 72, 255),   IM_COL32(217, 88, 71, 255),   IM_COL32(216, 86, 70, 255),
        IM_COL32(215, 84, 68, 255),   IM_COL32(214, 82, 67, 255),   IM_COL32(212, 79, 66, 255),
        IM_COL32(211, 77, 64, 255),   IM_COL32(210, 75, 63, 255),   IM_COL32(209, 73, 62, 255),
        IM_COL32(207, 70, 61, 255),   IM_COL32(206, 68, 60, 255),   IM_COL32(205, 66, 58, 255),
        IM_COL32(204, 63, 57, 255),   IM_COL32(202, 61, 56, 255),   IM_COL32(201, 59, 55, 255),
        IM_COL32(200, 56, 53, 255),   IM_COL32(198, 53, 52, 255),   IM_COL32(197, 50, 51, 255),
        IM_COL32(196, 48, 50, 255),   IM_COL32(194, 45, 49, 255),   IM_COL32(193, 42, 48, 255),
        IM_COL32(191, 40, 46, 255),   IM_COL32(190, 35, 45, 255),   IM_COL32(188, 31, 44, 255),
        IM_COL32(187, 26, 43, 255),   IM_COL32(185, 22, 42, 255),   IM_COL32(184, 17, 41, 255),
        IM_COL32(182, 13, 40, 255),   IM_COL32(181, 8, 39, 255),    IM_COL32(179, 3, 38, 255),
    };
    ImPlot::AddColormap("CoolWarm", (const ImU32 *)s_values[cmap].data(), s_values[cmap].size(), false);

    cmap           = Colormap_AbsGreys;
    s_values[cmap] = {IM_COL32(255, 255, 255, 255), IM_COL32(0, 0, 0, 255), IM_COL32(255, 255, 255, 255)};
    ImPlot::AddColormap("Abs Grey", (const ImU32 *)s_values[cmap].data(), s_values[cmap].size(), false);

    for (cmap = 0; cmap < Colormap_COUNT; ++cmap)
    {
        s_textures[cmap] = std::make_unique<Texture>(
            Texture::PixelFormat::RGBA, Texture::ComponentFormat::UInt8, int2(s_values[cmap].size(), 1),
            Texture::InterpolationMode::Nearest,
            cmap <= ImPlotColormap_Paired ? Texture::InterpolationMode::Nearest : Texture::InterpolationMode::Bilinear,
            Texture::WrapMode::ClampToEdge, 1, Texture::TextureFlags::ShaderRead);
        if (s_textures[cmap]->pixel_format() != Texture::PixelFormat::RGBA)
            throw std::invalid_argument("Pixel format not supported by the hardware!");
        if (s_textures[cmap]->component_format() != Texture::ComponentFormat::UInt8)
            throw std::invalid_argument("Component format not supported by the hardware!");

        s_textures[cmap]->upload((const uint8_t *)s_values[cmap].data());
    }
}
void Colormap::cleanup()
{
    for (int cmap = 0; cmap < Colormap_COUNT; ++cmap) s_textures[cmap].reset();
}

const char *Colormap::name(Colormap_ idx) { return ImPlot::GetColormapName(idx); }
Texture *Colormap::texture(Colormap_ idx) { return idx < Colormap_COUNT && idx >= 0 ? s_textures[idx].get() : nullptr; }
const std::vector<ImU32> &Colormap::values(Colormap_ idx)
{
    if (idx >= Colormap_COUNT || idx < 0)
        throw std::invalid_argument(fmt::format("Invalid colormap index: {}", idx));
    return s_values[idx];
}

ImVec4 Colormap::sample(Colormap_ idx, float t)
{
    float cmap_size = Colormap::values(idx).size();
    return ImPlot::SampleColormap(saturate(lerp(0.5f / cmap_size, (cmap_size - 0.5f) / cmap_size, t)), idx);
}